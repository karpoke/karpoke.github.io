<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Nacho Cano" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="apache, cabeceras HTTP, hsts, http, https, man in the middle, mitm, mod_headers, robo de sesión, ssl, admin, " />

<meta property="og:title" content="HTTP Strict Transport Security "/>
<meta property="og:url" content="https://karpoke.ignaciocano.com/2011/09/11/http-strict-transport-security/" />
<meta property="og:description" content="HTTP Strict Transport Security (HSTS) es un mecanismo de seguridad web donde el servidor exige que las conexiones se realicen únicamente mediante conexiones seguras. El servidor informa de esta política de seguridad utilizando la cabecera Strict-Transport-Security, en donde se especifica el periodo durante el cual las conexiones seguras son obligatorias …" />
<meta property="og:site_name" content="Karpoke" />
<meta property="og:article:author" content="Nacho Cano" />
<meta property="og:article:published_time" content="2011-09-11T17:37:00+02:00" />
<meta name="twitter:title" content="HTTP Strict Transport Security ">
<meta name="twitter:description" content="HTTP Strict Transport Security (HSTS) es un mecanismo de seguridad web donde el servidor exige que las conexiones se realicen únicamente mediante conexiones seguras. El servidor informa de esta política de seguridad utilizando la cabecera Strict-Transport-Security, en donde se especifica el periodo durante el cual las conexiones seguras son obligatorias …">

        <title>HTTP Strict Transport Security  · Karpoke
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="https://karpoke.ignaciocano.com/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://karpoke.ignaciocano.com/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://karpoke.ignaciocano.com/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://karpoke.ignaciocano.com/theme/css/admonition.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://karpoke.ignaciocano.com/theme/css/custom.css" media="screen">

        <link href="https://karpoke.ignaciocano.com/feeds/all/rss.xml" type="application/rss+xml" rel="alternate" title="Karpoke - Full RSS Feed" />
        <link href="https://karpoke.ignaciocano.com/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Karpoke - RSS Feed" />


    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://karpoke.ignaciocano.com/"><span class=site-name>Karpoke</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://karpoke.ignaciocano.com
                                    >Home</a>
                                </li>
                                <li ><a href="https://karpoke.ignaciocano.com/whoami/">Who am I</a></li>
                                <li ><a href="https://karpoke.ignaciocano.com/categorias/">Categories</a></li>
                                <li ><a href="https://karpoke.ignaciocano.com/etiquetas/">Tags</a></li>
                                <li ><a href="https://karpoke.ignaciocano.com/archivos/">Archives</a></li>
                                <li><form class="navbar-search" action="https://karpoke.ignaciocano.com/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://karpoke.ignaciocano.com/2011/09/11/http-strict-transport-security/">
                HTTP Strict Transport Security
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <p><a href="http://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security" title="HTTP Strict Transport Security">HTTP Strict Transport Security</a> (HSTS) es un mecanismo de seguridad
web donde el servidor exige que las conexiones se realicen únicamente
mediante conexiones seguras. El servidor informa de esta política de
seguridad utilizando la cabecera <code>Strict-Transport-Security</code>, en donde
se especifica el periodo durante el cual las conexiones seguras son
obligatorias.</p>
<p>Si una web proporciona acceso seguro (HTTPS) pero accedemos de forma no
segura (HTTP) <a href="http://hacks.mozilla.org/2010/08/firefox-4-http-strict-transport-security-force-https/" title="podría suceder que nos redirija a la versión segura">podría suceder que nos redirija a la versión segura</a>,
sin embargo, ya se había iniciado una conversación sin cifrar. Este
comportamiento puede ser explotado por un ataque <em>Man-In-The-Middle</em>.</p>
<p>La política de seguridad HSTS pretende evitar este tipo de ataques,
impidiendo que se realice ninguna conexión que no sea segura. La
cabecera no se envía durante una transacción HTTP no cifrada dado que el
User-Agent no sabe si HTTPS está disponible y porque podría haber sido
inyectada por un atacante.</p>
<h2>Configuración en Apache</h2>
<p>En Apache, además de tener habilitado <code>mod_headers</code>, deberemos
introducir la siguiente línea allí <a href="http://mikkel.hoegh.org/blog/2010/sep/9/protecting-your-users-phishing-apache-rules-hsts" title="donde configuramos la conexión SSL">donde configuramos la conexión
SSL</a>. Por ejemplo, tras el <code>DocumentRoot</code> del <code>VirtualHost</code> seguro por
defecto en el archivo <code>/etc/apache2/sites-enabled/default-ssl</code>:</p>
<p><code>bash
Header add Strict-Transport-Security "max-age=15768000"</code></p>
<p>El atributo <code>max-age</code> especifica el tiempo durante el cual las
conexiones seguras serán obligatorias. También se puede añadir el
atributo <code>includeSubDomains</code> para incluir todos los subdominios:</p>
<p><code>bash
Header add Strict-Transport-Security "max-age=15768000; includeSubDomains"</code></p>
<p>WordPress, por ejemplo, tiene una directiva para conseguir que la
<a href="https://karpoke.ignaciocano.com/2011/06/14/usando-una-conexion-segura-en-el-panel-de-control-de-wordpress/" title="Usando una conexión segura en el panel de control de WordPress">conexión al panel de control se haga a través de una conexión
segura</a>. Pero es posible que en otros casos sigamos necesitando una
redirección hacia la versión segura de la página, que podemos conseguir
mediante <code>mod_rewrite</code>:</p>
<p><code>bash
&lt;IfModule mod_rewrite.c&gt;
  RewriteEngine On
  RewriteCond %{HTTPS} off
  RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}
&lt;/IfModule&gt;</code></p>


            
            
            






            <hr/>
<section>
    <h2>Entradas relacionadas</h2>
<ul class="related-posts-list">
<li><a href="https://karpoke.ignaciocano.com/2011/06/14/usando-una-conexion-segura-en-el-panel-de-control-de-wordpress/" title="Usando una conexión segura en el panel de control de Wordpress">Usando una conexión segura en el panel de control de Wordpress</a></li>
<li><a href="https://karpoke.ignaciocano.com/2011/07/30/sslh-compartiendo-el-puerto-443/" title="sslh, compartiendo el puerto 443">sslh, compartiendo el puerto 443</a></li>
<li><a href="https://karpoke.ignaciocano.com/2011/08/15/ssh-over-http-proxy/" title="SSH over HTTP-Proxy">SSH over HTTP-Proxy</a></li>
<li><a href="https://karpoke.ignaciocano.com/2011/08/31/denegacion-de-servicio-en-apache-utilizando-la-cabecera-range/" title="Denegación de servicio en Apache utilizando la cabecera Range">Denegación de servicio en Apache utilizando la cabecera Range</a></li>
<li><a href="https://karpoke.ignaciocano.com/2012/12/15/subdominios-dinamicos-en-un-alojamiento-con-dominio-dinamico-en-ovh/" title="Subdominios dinámicos en un alojamiento con dominio dinámico en OVH">Subdominios dinámicos en un alojamiento con dominio dinámico en OVH</a></li>
</ul>
<hr />
</section>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="https://karpoke.ignaciocano.com/2011/08/31/denegacion-de-servicio-en-apache-utilizando-la-cabecera-range/" title="Previous: Denegación de servicio en Apache utilizando la cabecera Range">Denegación de servicio en Apache utilizando la cabecera Range</a></li>
                <li class="next-article"><a href="https://karpoke.ignaciocano.com/2011/09/11/obtener-la-contrasena-a-partir-de-los-asteriscos-de-un-formulario-web/" title="Next: Obtener la contraseña a partir de los asteriscos de un formulario web">Obtener la contraseña a partir de los asteriscos de un formulario web</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2011-09-11T17:37:00+02:00">Sep 11, 2011</time>
            <h4>Category</h4>
            <a class="category-link" href="https://karpoke.ignaciocano.com/categorias/#admin-ref">admin</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://karpoke.ignaciocano.com/etiquetas/#apache-ref">apache
                    <span>14</span>
</a></li>
                <li><a href="https://karpoke.ignaciocano.com/etiquetas/#cabeceras-http-ref">cabeceras HTTP
                    <span>5</span>
</a></li>
                <li><a href="https://karpoke.ignaciocano.com/etiquetas/#hsts-ref">hsts
                    <span>1</span>
</a></li>
                <li><a href="https://karpoke.ignaciocano.com/etiquetas/#http-ref">http
                    <span>4</span>
</a></li>
                <li><a href="https://karpoke.ignaciocano.com/etiquetas/#https-ref">https
                    <span>11</span>
</a></li>
                <li><a href="https://karpoke.ignaciocano.com/etiquetas/#man-in-the-middle-ref">man in the middle
                    <span>1</span>
</a></li>
                <li><a href="https://karpoke.ignaciocano.com/etiquetas/#mitm-ref">mitm
                    <span>3</span>
</a></li>
                <li><a href="https://karpoke.ignaciocano.com/etiquetas/#mod_headers-ref">mod_headers
                    <span>3</span>
</a></li>
                <li><a href="https://karpoke.ignaciocano.com/etiquetas/#robo-de-sesion-ref">robo de sesión
                    <span>1</span>
</a></li>
                <li><a href="https://karpoke.ignaciocano.com/etiquetas/#ssl-ref">ssl
                    <span>10</span>
</a></li>
            </ul>
<h4>Contacto</h4>
<div id="sidebar-social-link">
    <a href="https://github.com/karpoke" title="" target="_blank" rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
    <a href="/feeds/all/rss.xml" title="" target="_blank" rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="RSS" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#f80"/><circle cx="145" cy="367" r="35" fill="#fff"/><path fill="none" stroke="#fff" stroke-width="60" d="M109 241c89 0 162 73 162 162M109 127c152 0 276 124 276 276"/></svg>
    </a>
</div>
            





            





        </div>
        </section>
</div>
</article>
                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>
    <div>
        2010-2019 (cc) Contenido bajo licencia <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/es/">Creative Commons Reconocimiento-CompartirIgual</a>.
    </div>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>