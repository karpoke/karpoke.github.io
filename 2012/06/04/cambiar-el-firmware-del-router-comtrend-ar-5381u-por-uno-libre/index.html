<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Nacho Cano" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="ar5381u, comtrend, firmware, firmware libre, Jazztel, opendns, ts-069, admin, " />

<meta property="og:title" content="Cambiar el firmware del router Comtrend AR-5381u por uno libre "/>
<meta property="og:url" content="https://karpoke.ignaciocano.com/2012/06/04/cambiar-el-firmware-del-router-comtrend-ar-5381u-por-uno-libre/" />
<meta property="og:description" content="Si tenemos un router Comtrend AR-5381u, uno de los que entrega Jazztel, podemos actualizar el firmware que trae por uno libre no oficial. ¿Por qué actualizar el firmware? Porque nos permite configurar completamente el router, sin restricciones. En particular, podremos cambiar el usuario de acceso al router o deshabilitar TS-069 …" />
<meta property="og:site_name" content="Karpoke" />
<meta property="og:article:author" content="Nacho Cano" />
<meta property="og:article:published_time" content="2012-06-04T13:32:00+02:00" />
<meta name="twitter:title" content="Cambiar el firmware del router Comtrend AR-5381u por uno libre ">
<meta name="twitter:description" content="Si tenemos un router Comtrend AR-5381u, uno de los que entrega Jazztel, podemos actualizar el firmware que trae por uno libre no oficial. ¿Por qué actualizar el firmware? Porque nos permite configurar completamente el router, sin restricciones. En particular, podremos cambiar el usuario de acceso al router o deshabilitar TS-069 …">

        <title>Cambiar el firmware del router Comtrend AR-5381u por uno libre  · Karpoke
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="https://karpoke.ignaciocano.com/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://karpoke.ignaciocano.com/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://karpoke.ignaciocano.com/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://karpoke.ignaciocano.com/theme/css/admonition.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://karpoke.ignaciocano.com/theme/css/custom.css" media="screen">

        <link href="https://karpoke.ignaciocano.com/feeds/all/rss.xml" type="application/rss+xml" rel="alternate" title="Karpoke - Full RSS Feed" />
        <link href="https://karpoke.ignaciocano.com/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Karpoke - RSS Feed" />


    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://karpoke.ignaciocano.com/"><span class=site-name>Karpoke</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://karpoke.ignaciocano.com
                                    >Home</a>
                                </li>
                                <li ><a href="https://karpoke.ignaciocano.com/whoami/">Who am I</a></li>
                                <li ><a href="https://karpoke.ignaciocano.com/categorias/">Categories</a></li>
                                <li ><a href="https://karpoke.ignaciocano.com/etiquetas/">Tags</a></li>
                                <li ><a href="https://karpoke.ignaciocano.com/archivos/">Archives</a></li>
                                <li><form class="navbar-search" action="https://karpoke.ignaciocano.com/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://karpoke.ignaciocano.com/2012/06/04/cambiar-el-firmware-del-router-comtrend-ar-5381u-por-uno-libre/">
                Cambiar el firmware del router Comtrend AR-5381u por uno libre
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <p>Si tenemos un <em>router</em> Comtrend AR-5381u, uno de los que entrega
Jazztel, podemos <a href="http://bandaancha.eu/tema/1684224/nuevos-firms-no-oficiales-libres-fin-d-ar-5381u-soporte-3g-dlna-act-4-septiembre" title="actualizar el firmware que trae por uno libre no oficial">actualizar el firmware que trae por uno libre no
oficial</a>.</p>
<h2>¿Por qué actualizar el firmware?</h2>
<p>Porque nos permite configurar completamente el <em>router</em>, sin
restricciones. En particular, podremos cambiar el usuario de acceso al
<em>router</em> o deshabilitar TS-069 (administración remota por parte de
Jazztel y que es imposible deshabilitar con el <em>firmware</em> oficial) si
queremos.</p>
<h2>Instalación</h2>
<p>Lo primero es escoger uno de los <em>firmware</em> disponibles. En mi caso, he
probado el <em>firmware</em> <code>657003-457(AR-5382u-A731-406CTL-C01_R07).bin</code>. Se
puede descargar desde <a href="http://bandaancha.eu/store/Jazztel/AR5381NOF.zip" title="bandaancha.eu">bandaancha.eu</a>.</p>
<p>Actualizaremos el <em>firmware</em> desde la propia administración del
<em>router</em>, pero antes deberíamos tener claros los parámetros para
configurar nuestra conexión. Más adelante pondré los que yo he
utilizado, pero pueden ser diferentes en otros casos. Lo más sencillo es
hacer capturas de pantalla de cada opción del panel de administración,
así estaremos seguros de que no nos dejamos nada.</p>
<p>Reseteamos el <em>router</em>, nos conectamos por cable y entramos al panel de
administración. Después de haber reseteado el <em>router</em>, la IP por
defecto será <code>http://192.168.1.1</code>, el usuario <code>admin</code> y la contraseña
<code>admin</code>.</p>
<p>Nos conectamos al panel de administración, actualizaremos con el
<em>firmware</em> que nos hemos descargado, en mi caso
<code>657003-457(AR-5382u-A731-406CTL-C01_R07).bin</code>, y le damos a actualizar.</p>
<p>Después de que termine, volvemos a resetear el <em>router</em>.</p>
<p>Para que quede claro porque es importante, antes de actualizar
reseteamos el <em>router</em>, actualizamos y volvemos a <em>resetear</em>.</p>
<p>Ahora ya podremos acceder al nuevo panel de administración en
<code>http://192.168.1.1</code>. El usuario por defecto es <code>root</code> y la contraseña
<code>12345</code>. Esta es la que yo he utilizado pero dependiendo del <em>firmware</em>
puede que la contraseña haya que dejarla en blanco, o incluso que
usuario y contraseña sean <code>user/user</code>.</p>
<h2>Configuración</h2>
<p>Esta es la configuración que he usado para una conexión 20 MB con
Jazztel.</p>
<p>Lo primero es cambiar la contraseña de acceso. Vamos a Management &gt;
Access control:</p>
<ul>
<li>old username: root</li>
<li>old password: 12345</li>
</ul>
<p>Y ponemos el nuevo.</p>
<p>También es interesante restringir el acceso al panel de administración
del <em>router</em>. Vamos a Management &gt; Service address y dejamos marcados:</p>
<ul>
<li>HTTP desde LAN</li>
<li>SSH desde LAN</li>
<li>Resto deshabilitado, si no lo vamos a usar.</li>
</ul>
<p>Ahora configuraremos la interfaz ATM. Vamos a Advanced setup &gt; Layer2
interface &gt; ATM interface &gt; Add:</p>
<ul>
<li>VPI: 8</li>
<li>VCI: 35</li>
<li>DSL Latency: Path0</li>
<li>Link Type: EoA</li>
<li>Connection Mode: Default Mode</li>
<li>Encapsulation Mode: LLC/SNAP-BRIDGING</li>
<li>Service Category: UBR without PCR</li>
<li>IP QoS Scheduler: Strict Policy</li>
</ul>
<p>Le damos a guardar.</p>
<p>Ahora la interfaz WAN. Vamos a Advanced setup &gt; WAN interface &gt; Add,
seleccionamos atm(0_8_35) &gt; PPPoE y marcamos:</p>
<ul>
<li>Enable NAT</li>
<li>Enable firewall</li>
</ul>
<p>El resto de opciones de la interfaz las podemos dejar en blanco o por
defecto.</p>
<p>Añadiremos los servidores DNS. Vamos a Advanced setup &gt; WAN service &gt;
Router ppp0 &gt; DNS servers:</p>
<ul>
<li>OpenDNS: 208.67.222.222 y 208.67.220.220</li>
<li>Google:8.8.8.8 y 8.8.4.4</li>
<li>Jazztel: 87.216.1.65 y 87.216.1.66</li>
</ul>
<p>Ya está, con esto el <em>router</em> ya debería sincronizar y deberíamos poder
navegar. El resto de opciones de configuración dependerán de las
necesidades de cada uno.</p>
<h2>Más opciones</h2>
<h3>Servidores virtuales</h3>
<p>Si queremos añadir entradas en la NAT vamos a Advanced setup &gt; NAT &gt;
Virtual servers. Si queremos redireccionar el puerto 80, nos avisará de
que la interfaz web de acceso al router se cambia al puerto 8080. Sin
embargo esto no sucede, y si tenemos un dominio para acceder a nuestra
red desde Internet, y accedemos a dicho dominio desde dentro de la red,
accederemos al panel de administración del router y no al equipo al que
habíamos redirigido el puerto.</p>
<p>Una solución es añadir el dominio en el archivo <code>/etc/hosts</code>. Por
ejemplo, si nuestro dominio es domain.tld y el servidor web tiene la ip
192.168.50.100, en <code>/etc/hosts</code> añadiremos:</p>
<p><code>bash
domain.tld 192.168.50.100</code></p>
<h3>Red inalámbrica</h3>
<p>Para configurar la red, vamos a Wireless &gt; Basic:</p>
<ul>
<li>Nos aseguramos de que WPS está desactivado, si no lo vamos a usar.
    No hace mucho se ha descubierto una vulnerabilidad que permite
    <a href="http://bandaancha.eu/articulos/vulnerabilidad-wps-permite-ataques-8214" title="acceso a la Wifi por fuerza bruta">acceso a la Wifi por fuerza bruta</a>.</li>
<li>Authentication: WPA-PSK, AES</li>
</ul>
<p>Si ponemos las mismas credenciales que teníamos anteriormente, es
posible que nuestro equipo detecte la red y se conecte también a la red
inalámbrica (además de que seguimos conectados por cable).</p>
<h3>Actualización horaria</h3>
<p>Si queremos que la hora del <em>router</em> se actualice consultando los
servidores NTP de internet, vamos a Management &gt; Internet time, y lo
activamos.</p>
<h2>Referencias</h2>
<p>» <a href="http://bandaancha.eu/tema/1684224/nuevos-firms-no-oficiales-libres-fin-d-ar-5381u-soporte-3g-dlna-act-4-septiembre" title="actualizar el firmware que trae por uno libre no oficial">Nuevos firms no oficiales ( y libres, por fin :D) para el AR-5381u
con soporte 3G y DLNA (Act. 4 de septiembre)</a>
» <a href="http://bandaancha.eu/tema/1680034/nuevos-firmwares-no-oficiales-ar-5381u" title="Nuevos firmwares (no oficiales) para el AR-5381u">Nuevos firmwares (no oficiales) para el AR-5381u</a></p>


            
            
            






            <hr/>
<section>
    <h2>Entradas relacionadas</h2>
<ul class="related-posts-list">
<li><a href="https://karpoke.ignaciocano.com/2012/02/09/reiniciar-el-router-desde-bash/" title="Reiniciar el router desde el terminal">Reiniciar el router desde el terminal</a></li>
<li><a href="https://karpoke.ignaciocano.com/2012/07/03/conexion-inalambrica-en-raspbmc/" title="Conexión inalámbrica en Raspbmc">Conexión inalámbrica en Raspbmc</a></li>
<li><a href="https://karpoke.ignaciocano.com/2013/01/17/cifrando-el-trafico-dns/" title="Cifrando el tráfico DNS">Cifrando el tráfico DNS</a></li>
<li><a href="https://karpoke.ignaciocano.com/2016/12/03/actualizar-nuestra-ip-en-el-panel-de-opendns/" title="Actualizar nuestra IP en el panel de OpenDNS">Actualizar nuestra IP en el panel de OpenDNS</a></li>
</ul>
<hr />
</section>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="https://karpoke.ignaciocano.com/2012/06/04/porque-robar-a-los-pequenos-es-mas-facil/" title="Previous: Porque robar a los pequeños es más fácil">Porque robar a los pequeños es más fácil</a></li>
                <li class="next-article"><a href="https://karpoke.ignaciocano.com/2012/06/04/deuda-tecnica/" title="Next: Deuda técnica">Deuda técnica</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2012-06-04T13:32:00+02:00">Jun 4, 2012</time>
            <h4>Category</h4>
            <a class="category-link" href="https://karpoke.ignaciocano.com/categorias/#admin-ref">admin</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://karpoke.ignaciocano.com/etiquetas/#ar5381u-ref">ar5381u
                    <span>1</span>
</a></li>
                <li><a href="https://karpoke.ignaciocano.com/etiquetas/#comtrend-ref">comtrend
                    <span>2</span>
</a></li>
                <li><a href="https://karpoke.ignaciocano.com/etiquetas/#firmware-ref">firmware
                    <span>1</span>
</a></li>
                <li><a href="https://karpoke.ignaciocano.com/etiquetas/#firmware-libre-ref">firmware libre
                    <span>1</span>
</a></li>
                <li><a href="https://karpoke.ignaciocano.com/etiquetas/#jazztel-ref">Jazztel
                    <span>1</span>
</a></li>
                <li><a href="https://karpoke.ignaciocano.com/etiquetas/#opendns-ref">opendns
                    <span>4</span>
</a></li>
                <li><a href="https://karpoke.ignaciocano.com/etiquetas/#ts-069-ref">ts-069
                    <span>1</span>
</a></li>
            </ul>
<h4>Contacto</h4>
<div id="sidebar-social-link">
    <a href="https://github.com/karpoke" title="" target="_blank" rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
    <a href="/feeds/all/rss.xml" title="" target="_blank" rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="RSS" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#f80"/><circle cx="145" cy="367" r="35" fill="#fff"/><path fill="none" stroke="#fff" stroke-width="60" d="M109 241c89 0 162 73 162 162M109 127c152 0 276 124 276 276"/></svg>
    </a>
</div>
            





            





        </div>
        </section>
</div>
</article>
                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>
    <div>
        2010-2019 (cc) Contenido bajo licencia <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/es/">Creative Commons Reconocimiento-CompartirIgual</a>.
    </div>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>